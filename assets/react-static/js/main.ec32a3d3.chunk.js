(this.webpackJsonptweetme_reactjs=this.webpackJsonptweetme_reactjs||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(4),l=n.n(r),o=(n(13),n(2)),i=n(1);var s=function(e,t,n,a){var c=new XMLHttpRequest,r="http://localhost:8000/api".concat(t);c.responseType="json",c.open(e,r),c.setRequestHeader("Content-Type","application/json");var l,o=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var c=n[a].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");o&&c.setRequestHeader("X-CSRFToken",o),"POST"===e&&c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.onload=function(){403===c.status&&c.response&&("Authentication credentials were not provided."===c.response.detail&&-1===window.location.href.indexOf("login")&&(window.location.href="account/login?showLoginRequired=true"));n(c.response,c.status)},c.onerror=function(e){console.log("error",e),n({msg:"error on request"},400)},a&&(l=JSON.stringify(a)),c.send(l)},u=function(e,t){var n="/feed/";null!==t&&void 0!==t&&(n=t.replace("http://localhost:8000/api","")),s("GET",n,e)},m=function(e){var t=c.a.createRef(),n=e.didTweet,a=function(e,t){201===t?n(e):console.log(t,e)};return c.a.createElement("div",{className:"col-8 my-4"},c.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault();var n=t.current.value;s("POST","/create/",a,{content:n}),t.current.value=""}},c.a.createElement("textarea",{required:!0,ref:t,className:"form-control",placeholder:"tweet it..."}),c.a.createElement("button",{type:"submit",className:"btn btn-secondary mt-2"},"tweet")))},d=function(e){var t=e.newTweets,n=Object(a.useState)([]),r=Object(i.a)(n,2),l=r[0],s=r[1],m=Object(a.useState)([]),d=Object(i.a)(m,2),f=d[0],p=d[1],b=Object(a.useState)(!1),E=Object(i.a)(b,2),w=E[0],v=E[1],g=Object(a.useState)(null),h=Object(i.a)(g,2),y=h[0],j=h[1];Object(a.useEffect)((function(){var e=Object(o.a)(t).concat(l);e.length!==f.length&&p(e)}),[t,l,f]),Object(a.useEffect)((function(){if(!1===w){console.log("tweetsFeedApi called");u((function(e,t){200===t?(s(e.results),j(e.next),v(!0)):console.log("There is an error;probably the django server is not running")}))}}),[l,w,v,e.username]);var N=function(e){var t=Object(o.a)(l);t.unshift(e),s(t);var n=Object(o.a)(f);n.unshift(e),s(n)};return c.a.createElement(c.a.Fragment,null," ",c.a.createElement("div",null,f.map((function(e,t){return c.a.createElement(O,{key:t,didRetweet:N,tweet:e})}))),null!=y&&c.a.createElement("button",{className:"btn btn-primary",onClick:function(e){if(e.preventDefault(),null!=y){u((function(e,t){if(200===t){var n=e.results,a=Object(o.a)(f).concat(n);p(a),s(a),j(e.next)}else console.log("There is an error;probably the django server is not running")}),y)}}},"Load More"))},f=function(e){var t=e.tweet,n=e.action,a=e.didPerformAction,r=t.likes?t.likes:0,l="btn btn-primary mt-2 mx-2";"retweet"===n.type&&(l="btn mt-2 mx-2 btn-outline-info");var o=n.display?n.display:"action",i=function(e,t){console.log(e,t),200!==t&&201!==t||!a||a(e,t)},u="like"===n.type?"".concat(r," ").concat(o):o;return c.a.createElement("button",{className:l,onClick:function(e){var a,c;e.preventDefault(),a=t.id,c=n.type,s("POST","/action",i,{id:a,action:c})}},u)},p=n(7),b=function(e){var t=e.user;return c.a.createElement(E,{user:t},c.a.createElement("span",{className:"px-4 py-2 rounded-circle border text-center bg-secondary",style:{fontSize:"40px"}},t.username[0]))},E=function(e){var t=e.user;return c.a.createElement("span",{className:"pointer",onClick:function(e){window.location.pathname="/profile/".concat(t.username)}},e.children)},w=function(e){var t=e.user,n=e.includeFullName,a=e.hidelink,r=!0===n?"".concat(t.first_name," ").concat(t.last_name):null;return c.a.createElement(c.a.Fragment,null,r," ",!0===a?"@".concat(t.username):c.a.createElement(E,{user:t},"@",t.username))},v=function(e){var t=e.profile,n=e.didFollowToggle,a=e.profileLoading,r=t&&t.is_following?"unfollow":"follow";return c.a.createElement("section",{className:"aboutSection mt-5"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row align-item-center"},c.a.createElement("div",{className:"col-lg-9 mx-auto text-center flex"},c.a.createElement("h3",null,"Profile"),c.a.createElement("p",null,c.a.createElement(w,{user:t,hidelink:!0,includeFullName:!0})),c.a.createElement("p",null,t.bio),c.a.createElement("p",null,t.location),c.a.createElement("button",{className:"btn"},"Edit Profile"))),c.a.createElement("div",{className:"counter bg-secondary "},c.a.createElement("div",{className:"row col-md-9 py-4 mx-auto"},c.a.createElement("div",{className:"col-md-4 col-6 border"},c.a.createElement("div",{className:"text-center"},c.a.createElement("h6",null," ",t.following_count," "),c.a.createElement("p",null,"following"))),c.a.createElement("div",{className:"col-lg-4 col-6 border"},c.a.createElement("div",{className:"text-center"},c.a.createElement("h6",null," ",t.follower_count," "),c.a.createElement("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),!1===a&&n(r)}},r),c.a.createElement("p",null,"followers"))),c.a.createElement("div",{className:"col-lg-4 col-6 border"},c.a.createElement("div",{className:"text-center "},c.a.createElement("h6",null," ",t.no_of_tweets," "),c.a.createElement("p",null,"tweets")))))))},g=function(e){var t=e.username,n=Object(a.useState)(!1),r=Object(i.a)(n,2),l=r[0],o=r[1],s=Object(a.useState)(null),u=Object(i.a)(s,2),m=u[0],d=u[1],f=Object(a.useState)(!1),p=Object(i.a)(f,2),b=p[0],E=p[1],w=function(e,t){console.log(t,e),200===t&&d(e)};Object(a.useEffect)((function(){!1===l&&(h(t,w),o(!0))}),[t,l,o]);return m?c.a.createElement(v,{profile:m,didFollowToggle:function(e){console.log(e),y(t,e,(function(e,t){200===t&&(d(e),console.log(e)),E(!1)})),E(!0)},profileLoading:b}):c.a.createElement("h2",null,"loading...")},h=function(e,t){s("GET","/profiles/".concat(e),t)},y=function(e,t,n){var a={action:"".concat(t&&t).toLowerCase()};s("POST","/profiles/".concat(e,"/follow"),n,a)},j=function(e){var t=e.tweet,n=e.retweeter;return t.parent?c.a.createElement("div",{className:"bg-secondary"},c.a.createElement("p",{className:"px-2"},"retweet via ",c.a.createElement(w,{user:n})),c.a.createElement(O,{hideActions:!0,tweet:t.parent})):null},O=function(e){var t=e.tweet,n=e.didRetweet,r=e.hideActions,l=window.location.pathname,o=Object(p.a)(/([0-9]+)/,{tweetId:1}),s=l.match(o),u=s?s.groups.tweetId:-1,m="".concat(t.id)==="".concat(u),d=Object(a.useState)(t||null),E=Object(i.a)(d,2),v=E[0],g=E[1],h=function(e,t){200===t?g(e):201===t&&n&&(n(e),console.log("retweeted"))};return c.a.createElement("div",{className:"card mx-4 my-2"},c.a.createElement("div",{className:"card-body d-flex"},c.a.createElement("div",{className:"col-1"},c.a.createElement(b,{user:t.user})),c.a.createElement("div",{className:"col-11"},c.a.createElement("div",null,c.a.createElement("p",{className:"pl-2 mx-2 text text-dark bg-white"},c.a.createElement(w,{user:t.user,includeFullName:!0})),c.a.createElement("p",{className:"py-2 my-2 text text-dark bg-white border text-center"},t.content),c.a.createElement(j,{tweet:t,retweeter:t.user})),v&&!0!==r&&c.a.createElement(c.a.Fragment,null,c.a.createElement(f,{tweet:v,didPerformAction:h,action:{type:"like",display:"Likes"}}),c.a.createElement(f,{tweet:v,didPerformAction:h,action:{type:"unlike",display:"Unlike"}}),c.a.createElement(f,{tweet:v,didPerformAction:h,action:{type:"retweet",display:"Retweet"}})),!0===m?null:c.a.createElement("button",{className:"btn btn-secondary",onClick:function(e){e.preventDefault(),window.location.href="/".concat(t.id)}}," View"))))},N=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],l=n[1],s="false"!==e.canTweet;return c.a.createElement("div",null,!0===s&&c.a.createElement(m,{didTweet:function(e){var t=Object(o.a)(r);t.unshift(e),l(t)},className:"mx-2 my-4"}),c.a.createElement(d,Object.assign({newTweets:r},e)))},x=function(e){var t=e.tweetid,n=Object(a.useState)(!1),r=Object(i.a)(n,2),l=r[0],o=r[1],u=Object(a.useState)(null),m=Object(i.a)(u,2),d=m[0],f=m[1],p=function(e,t){200===t?f(e):alert("There was an error finding your tweet")};return Object(a.useEffect)((function(){var e;console.log("use effect called"),!1===l&&(e=p,s("GET","/".concat(t),e),o(!0))}),[t,l,o]),null===d?null:c.a.createElement(O,{tweet:d})},k=document.getElementById("tweetme-2"),S=c.a.createElement;if(k){var T=S(N,k.dataset);l.a.render(T,k)}var R=document.getElementById("tweetme-feed");if(R){var q=S(N);l.a.render(q,R)}document.querySelectorAll(".tweetme-profile-badge").forEach((function(e){l.a.render(S(g,e.dataset),e)})),document.querySelectorAll(".tweetme-detail").forEach((function(e){l.a.render(S(x,e.dataset),e)}))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.ec32a3d3.chunk.js.map